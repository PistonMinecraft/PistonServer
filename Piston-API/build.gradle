plugins {
    id 'java'
    id 'idea'
}
apply from: '../buildScripts/shared.gradle'

sourceSets {
    pluginApi.java {
        srcDir "src/pluginapi/java"
    }
    main.java { srcDirs = [] }
    common.java {
        srcDir "src/common/java"
    }
    moddingApi.java {
        srcDir "src/moddingapi/java"
    }
}

task pluginApiJar(type: Jar) {
    archiveClassifier = 'pluginapi'
    from sourceSets.pluginApi.output
    from sourceSets.common.output
}

task moddingApiJar(type: Jar) {
    archiveClassifier = 'moddingapi'
    from sourceSets.moddingApi.output
    from sourceSets.common.output
}

jar {
    dependsOn pluginApiJar, moddingApiJar
    archiveClassifier = 'uber'
    from sourceSets.pluginApi.output
    from sourceSets.moddingApi.output
    from sourceSets.common.output
}

archivesBaseName = 'piston-api'
version = "${rootProject.ext.MC_VERSION}-${rootProject.ext.VERSION}+${rootProject.ext.BUILD}"